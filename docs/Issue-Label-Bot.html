<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="/assets/images/favicon-32.png" type="image/x-icon" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Issue Label Bot | Machine Learning Ops</title>
<meta name="generator" content="Jekyll v4.1.0" />
<meta property="og:title" content="Issue Label Bot" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A GitHub App powered by machine learning, written in Python. A discussion of the motivation for building this app is described in this blog." />
<meta property="og:description" content="A GitHub App powered by machine learning, written in Python. A discussion of the motivation for building this app is described in this blog." />
<link rel="canonical" href="https://mlops-github.com/docs/Issue-Label-Bot.html" />
<meta property="og:url" content="https://mlops-github.com/docs/Issue-Label-Bot.html" />
<meta property="og:site_name" content="Machine Learning Ops" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-12T12:25:27-05:00" />
<script type="application/ld+json">
{"datePublished":"2020-06-12T12:25:27-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlops-github.com/docs/Issue-Label-Bot.html"},"description":"A GitHub App powered by machine learning, written in Python. A discussion of the motivation for building this app is described in this blog.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mlops-github.com/assets/images/Data-driven-recommendations.png"}},"@type":"BlogPosting","url":"https://mlops-github.com/docs/Issue-Label-Bot.html","headline":"Issue Label Bot","dateModified":"2020-06-12T12:25:27-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://mlops-github.com/feed.xml" title="Machine Learning Ops" /><script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
   <style>
    body {
      background: #1b1f23;
    }
  </style>
</head><body class="doc_page"><header class="site-header" role="banner">
  <div class="navbar">

    <div class="logo">
      <!-- <img src="/assets/images/Data-driven-recommendations.png" alt="logo"> --><svg aria-hidden="true" class="indexesm__StyledOcticon-sc-1ao7p5-27 xrdzL" height="32" role="img" viewBox="0 0 16 16" width="32" style="display:inline-block;fill:currentColor;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg><a href="/">
        <span>Machine Learning Ops</span>
      </a>
    </div>

    <nav class="navigation hidden" id="navigation">
      
      <a href="/blog" >Blog Posts</a>
      
      <a href="/actions" >GitHub Actions</a>
      
      <a href="/examples" >Examples</a>
      
      <a href="/talks" >Talks</a>
      
      <a href="/docs" >Docs</a>
      
      <a href="/team" >Team</a></nav>

    <button class="toggle_mnu" id="toggle_menu" onclick="toggle_menu()">
      <img src="/assets/images/sandwich_white.png" class="open toggle_icon" alt="menu open">
      <img src="/assets/images/times.png" class="close toggle_icon hidden" alt="menu close">
    </button>
  </div>
</header><main class="page-content docs" aria-label="Content"><aside class="sidebar_left">
  <nav>
    <h2>Sections</h2>
    <ul><li>
        <a href="/docs/readme.html">Read Me</a>
      </li><li>
        <a href="/docs/Issue-Label-Bot.html">Issue Label Bot</a>
      </li><li>
        <a href="/docs/Markdown-here.html">Markdown Here</a>
      </li><li>
        <a href="/docs/Markdownsource.html">Sources for markdown</a>
      </li><li>
        <a href="/docs/spectral-interface.html">Spectral Inference</a>
      </li><li>
        <a href="/docs/welcome-to-jekyll.html">Welcome to Jekyll!</a>
      </li><li>
        <a href="/docs/working-with-run-debug.html">Work with run/debug configurations</a>
      </li></ul>
  </nav>
</aside><article class="h-entry document" itemscope itemtype="http://schema.org/BlogPosting">
  <div>
    <header class="doc_header">
      <h1 class="doc_title p-name" itemprop="name headline">Issue Label Bot</h1>
    </header>

    <div class="doc_content e-content" itemprop="articleBody">
      <p><a href="https://www.python.org/downloads/release/python-360/"><img src="https://img.shields.io/badge/python-3.6-blue.svg" alt="Python 3.6" /></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-darkgreen.svg" alt="License: MIT" /></a>
<a href="https://github.com/marketplace/issue-label-bot"><img src="https://img.shields.io/badge/GitHub%20Marketplace-Install%20App-blueviolet.svg?logo=github" alt="Install App" /></a></p>

<h5 id="code-for-how-to-automate-tasks-on-github-with-machine-learning-for-fun-and-profit">Code for: <a href="https://medium.com/@hamelhusain/mlapp-419f90e8f007?source=friends_link&amp;sk=760e18a2d6e60999d7eb2887352a92a8">“How to automate tasks on GitHub with machine learning for fun and profit”</a></h5>

<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->
<p>Table of Contents</p>

<ul>
  <li><a href="#issue-label-bot">Issue-Label Bot</a>
    <ul>
      <li><a href="#important-links">Important links</a></li>
      <li><a href="#files">Files</a></li>
    </ul>
  </li>
  <li><a href="#running-this-code">Running This Code</a>
    <ul>
      <li><a href="#environment-variables">Environment Variables</a></li>
      <li><a href="#run-locally">Run Locally</a></li>
      <li><a href="#deploy-as-a-service">Deploy As A Service</a></li>
    </ul>
  </li>
  <li><a href="#contributing">Contributing</a>
    <ul>
      <li><a href="#roadmap">Roadmap</a></li>
      <li><a href="#references">References</a></li>
    </ul>
  </li>
  <li><a href="#disclaimers">Disclaimers</a></li>
</ul>

<!-- /TOC -->

<p>Original Authors: <a href="https://github.com/hamelsmu">@hamelsmu</a>, <a href="https://github.com/inc0">@inc0</a>, <a href="https://github.com/jlewi">@jlewi</a></p>

<h1><img src="https://github.com/machine-learning-apps/MLapp/blob/master/images/Issue-Label-Bot7.png" width="100" height="100" />Issue Label Bot</h1>

<p><strong>Install this app <a href="https://github.com/marketplace/issue-label-bot">from the GitHub marketplace</a></strong></p>

<p>A GitHub App powered by machine learning, written in Python.  A discussion of the motivation for building this app is described in this <a href="https://medium.com/@hamelhusain/mlapp-419f90e8f007?source=friends_link&amp;sk=760e18a2d6e60999d7eb2887352a92a8">blog post</a>.</p>

<p>When an issue is opened, the bot predicts if the label should be a: <code class="language-plaintext highlighter-rouge">feature request</code>, <code class="language-plaintext highlighter-rouge">bug</code> or <code class="language-plaintext highlighter-rouge">question</code> and applies a label automatically if appropriate. Here is a screenshot of the bot in action:</p>

<blockquote>
  <p><img src="images/example4_big.png" alt="alt text" /></p>
</blockquote>

<p>More examples can be viewed on our <a href="https://label-bot-prod.mlbot.net/">app’s homepage</a>.  It should be noted that the bot may not apply any label in circumstances where the prediction is uncertain.  See the <a href="#Disclaimers">disclaimers</a> section for more caveats.</p>

<h2 id="important-links">Important links</h2>

<ul>
  <li><a href="https://label-bot-prod.mlbot.net/">Issue Label Bot homepage</a>. Provides a way to view example predictions as well as other information regarding this bot.</li>
  <li>GitHub <a href="https://github.com/marketplace/issue-label-bot">App page</a> for Issue Label Bot, where you can install the app. See <a href="#Disclaimers">disclaimers</a> below before installing.</li>
</ul>

<h2 id="files">Files</h2>

<ul>
  <li><a href="/notebooks">/notebooks</a>: contains notebooks on how to train the model and interact with the GitHub API using a Python client.</li>
  <li><a href="/flask_app">/flask_app</a>: code for a flask app that listens for <a href="https://developer.github.com/v3/issues/events/">GitHub issue events</a> and responds with predictions.  This is the main application that the user will interact with.</li>
  <li><a href="/argo">/argo</a>: the code in this directory relates to the construction of <a href="https://argoproj.github.io/">Argo ML Pipelines</a> for training and deploying ML workflows.</li>
  <li><a href="/deployment">/deployment</a>: This directory contains files that are helpful in deploying the app.
    <ul>
      <li><a href="/deployment/Dockerfile">Dockerfile</a> this is the definition of the container that is used to run the flask app.  The build for this container is hosted on DockerHub at <a href="https://hub.docker.com/r/hamelsmu/mlapp">hamelsmu/mlapp</a>.</li>
      <li><a href="/heroku.yml">heroku.yml</a>: this is used for <a href="https://devcenter.heroku.com/articles/container-registry-and-runtime">deploying to Heroku</a>.</li>
      <li>*.yaml: these files relate to a Kubernetes deployment.</li>
    </ul>
  </li>
</ul>

<h1 id="running-this-code">Running This Code</h1>

<p>## Prerequisites</p>

<p>To utilize the code in this repository, you will need to register a GitHub App of your own and install this app on your desired repositories and store authentication secrets.</p>

<p>First, walk through the <a href="https://developer.github.com/apps/quickstart-guides/using-the-github-api-in-your-app/#prerequisites">prerequisites section of this getting started guide</a> <strong>except</strong> “The Ruby programming language” section as we will be using Python instead as the client that interfaces with the GitHub API.</p>

<p>Second, <a href="https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/">setup your development environment</a>. Make sure you create a Webhook secret, even though this step is optional.</p>

<p>Next, set up a Postgres database.  You can do this <a href="https://elements.heroku.com/addons/heroku-postgresql">for free on Heroku</a>.    Detailed instructions (stolen shamelessly from <a href="https://www.edx.org/course/cs50s-web-programming-with-python-and-javascript">here</a>):</p>

<ol>
  <li>Navigate to https://www.heroku.com/, and create an account if you don’t already have one.</li>
  <li>On Heroku’s Dashboard, click “New” and choose “Create new app.”</li>
  <li>Give your app a name, and click “Create app.”</li>
  <li>On your app’s “Overview” page, click the “Configure Add-ons” button.</li>
  <li>In the “Add-ons” section of the page, type in and select “Heroku Postgres.”</li>
  <li>Choose the “Hobby Dev - Free” plan, which will give you access to a free PostgreSQL database that will support up to 10,000 rows of data. Click “Provision.”</li>
  <li>Now, click the “Heroku Postgres :: Database” link.</li>
  <li>You should now be on your database’s overview page. Click on 8 “Settings”, and then “View Credentials.” This is the information you’ll need to log into your database.</li>
</ol>

<p>Finally, you need to create environment variables for all the secrets, which is described below.</p>

<h2 id="environment-variables">Environment Variables</h2>

<ol>
  <li><code class="language-plaintext highlighter-rouge">PRIVATE_KEY</code>:  this is the private key you use to <a href="https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment">authenticate as an app</a> with the GitHub API.</li>
  <li><code class="language-plaintext highlighter-rouge">WEBHOOK_SECRET</code>: this is used to verify that payloads received by your app are actually from GitHub.  This is described <a href="https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/">here</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">DATABASE_URL</code>: this is the URL that contains the login information for your POSTGRESQL database, usually in the form: <code class="language-plaintext highlighter-rouge">postgres://&lt;username&gt;:&lt;password&gt;@&lt;url&gt;:5432/&lt;database_name&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">APP_ID</code>: this is a unique identifier provided to you by GitHub when you <a href="https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment">register your app</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">FLASK_ENV</code>: this is usually set to either <code class="language-plaintext highlighter-rouge">production</code> or <code class="language-plaintext highlighter-rouge">development</code>.  You will want to use <code class="language-plaintext highlighter-rouge">deployment</code> for local testing.</li>
  <li><code class="language-plaintext highlighter-rouge">PORT</code>: this is the port your app will be serving on.  Note that if you are deploying to Heroku, Heroku will override this variable with their own value when building your app.  For local development, you will want this to match the <a href="https://developer.github.com/apps/quickstart-guides/setting-up-your-development-environment/#step-1-start-a-new-smee-channel">port Smee is serving to</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">APP_URL</code>: this is the url for the homepage of your app that is provided to users as a link in issue comments.  You can set this to an arbitrary value for local development.</li>
</ol>

<p>Note: If you are using <a href="http://www.zsh.org/">zsh</a>, the <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/dotenv">dotenv</a> plugin can be useful for managing environment variables.</p>

<h2 id="run-locally">Run Locally</h2>

<ol>
  <li>
    <p><strong>Install Dependencies</strong>: Install <a href="/requirements.txt">requirements.txt</a> into a virtual environment.  If you are using <a href="https://pipenv.readthedocs.io/en/latest/">pipenv</a> install the necessary dependencies from <a href="/Pipenv.lock">Pipfile.lock</a> by typing <code class="language-plaintext highlighter-rouge">pipenv install</code> in the root of this repository.</p>
  </li>
  <li>
    <p><strong>Run the flask app</strong>: run <code class="language-plaintext highlighter-rouge">python flask_app/app.py</code> from the root of this repository.  For this to work, you must correctly set the environment variables as described in the <a href="#Environment-Variables">Environment Variables</a> section.</p>
  </li>
  <li>
    <p>Optional - <strong>Run app as docker container</strong>.  A Docker container that serves <a href="https://github.com/apps/issue-label-bot">Issue-Label Bot</a> can be built with the command <code class="language-plaintext highlighter-rouge">bash script/bootstrap</code> from the root of this repository.  This script builds a Docker image named <code class="language-plaintext highlighter-rouge">hamelsmu/mlapp</code>, which is also available <a href="https://hub.docker.com/r/hamelsmu/mlapp">on Dockerhub</a>.  If you desire to run the Docker container locally for testing, you must <a href="https://stackoverflow.com/questions/30494050/how-do-i-pass-environment-variables-to-docker-containers">pass the necessary environment variables</a> to the Docker container at runtime, as well as expose necessary ports for the app. See the <a href="#References">References</a> section for more resources on using Docker.</p>
  </li>
</ol>

<h2 id="deploy-as-a-service">Deploy As A Service</h2>

<p>The assets in this repo allow you to <a href="https://devcenter.heroku.com/articles/container-registry-and-runtime">deploy to Heroku</a> (easier) or a Kubernetes cluster (more advanced).</p>

<p>In Heroku, secrets can be passed in as <a href="https://devcenter.heroku.com/articles/config-vars">configuration variables</a>.  Furthermore, <a href="https://kubernetes.io/docs/concepts/configuration/secret/#creating-a-secret-manually">this documentation</a> describes how you can set secrets in Kubernetes.  Make sure you set the environment variable <code class="language-plaintext highlighter-rouge">FLASK_ENV</code> to <code class="language-plaintext highlighter-rouge">production</code> if you are going to deploy the app publicly.</p>

<h1 id="contributing">Contributing</h1>

<p>We welcome all forms of contributions.  We are especially interested in the following:</p>

<ul>
  <li>Bug fixes</li>
  <li>Enhancements or additional features</li>
  <li>Improvements to the model, or expansion of the dataset(s) used for training.</li>
</ul>

<h2 id="roadmap">Roadmap</h2>

<p>The authors of this project are interested in adding the following features in the near future:</p>

<ul>
  <li>Constructing better labels and negative samples of items that do not belong in the label set to drive further improvements.</li>
  <li>Using the tools from <a href="https://docs.fast.ai/">fastai</a> to explore:
    <ul>
      <li>State of the art architectures, such as <a href="https://docs.fast.ai/text.models.html#MultiHeadAttention">Multi-Head Attention</a></li>
      <li>Utilizing transfer learning to predict unique labels and/or enhance accuracy.</li>
    </ul>
  </li>
  <li>Using <a href="https://github.com/features/actions">GitHub Actions</a> to trigger automated deploys of this code.</li>
  <li>Model pipeline orchestration on <a href="https://argoproj.github.io/">Argo pipelines</a>.</li>
</ul>

<h2 id="references">References</h2>
<ul>
  <li>
    <p>The code in this repo and associated tutorial(s) assume familiarity with Docker. <a href="https://towardsdatascience.com/how-docker-can-help-you-become-a-more-effective-data-scientist-7fc048ef91d5">This blog post</a> offers a gentle introduction to Docker for data scientists.</p>
  </li>
  <li>Need inspiration for other data products you can build using machine learning and public GitHub datasets?  See these examples:
    <ul>
      <li><a href="https://towardsdatascience.com/how-to-create-data-products-that-are-magical-using-sequence-to-sequence-models-703f86a231f8">GitHub issue summarization</a> and recommendation.</li>
      <li>Natural language <a href="https://towardsdatascience.com/semantic-code-search-3cd6d244a39c">semantic code search</a>.</li>
    </ul>
  </li>
  <li>Excellent course on flask: <a href="https://www.edx.org/course/cs50s-web-programming-with-python-and-javascript">HarvardX CS50 Web</a>.</li>
  <li>MOOCs by <a href="https://www.fast.ai/">fastai</a> for <a href="http://course18.fast.ai/ml">machine learning</a> and <a href="http://course.fast.ai/">deep learning</a>.</li>
</ul>

<h1 id="disclaimers">Disclaimers</h1>

<p><a href="https://github.com/apps/issue-label-bot">Issue-Label Bot</a> is for educational and demonstration purposes only.  Our goal was to provide a minimal working example for the community with the least amount of complexity as possible. Therefore, we believe the model demonstrated has great room from improvement.  Furthermore, <strong>this app only works on public repositories and will do nothing if installed on a private repo.</strong></p>

    </div>
  </div>
  <a class="u-url" href="/docs/Issue-Label-Bot.html" hidden></a>

  <aside class="sidebar_right">
    
    <ul>
      <h2>Titles:</h2>
      
      <li>
        <a class="p_link" href="#important-links">Important links</a>
      </li>
      
      <li>
        <a class="p_link" href="#files">Files</a>
      </li>
      
      <li>
        <a class="p_link" href="#prerequisites">Prerequisites</a>
      </li>
      
      <li>
        <a class="p_link" href="#environment-variables">Environment Variables</a>
      </li>
      
      <li>
        <a class="p_link" href="#run-locally">Run Locally</a>
      </li>
      
      <li>
        <a class="p_link" href="#deploy-as-a-service">Deploy As A Service</a>
      </li>
      
      <li>
        <a class="p_link" href="#contributing">Contributing</a>
      </li>
      
    </ul>
    
    </nav>
  </aside>
</article>
  </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="footer_wrapper">

    <!-- <h2 class="footer-heading">Machine Learning Ops</h2> -->

    <div class="footer_grid">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Machine Learning Ops</li><li><a class="u-email" href="mailto:"></a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/github"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">github</span></a></li><li><a href="https://www.twitter.com/github"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">github</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A collection of resources on how to facilitate Machine Learning Ops with GitHub.</p>
      </div>
    </div>

  </div>

</footer><script src="/assets/js/common.js"></script>
</body>

</html>